---

- hosts: master
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - common
    - setup_swarm
    - setup_couchdb_cluster
    - deploy_web

- hosts: slave1
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - common
    - setup_swarm
    - setup_couchdb_cluster
    - deploy_web

- hosts: slave2
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - common
    - setup_swarm
    - setup_couchdb_cluster
    - deploy_web

- hosts: slave3
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - common
    - setup_swarm
    - setup_couchdb_cluster
    - deploy_web

- hosts: master
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - deploy_crawler

- hosts: slave1
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - deploy_crawler

- hosts: slave2
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - deploy_crawler

- hosts: slave3
  vars_files:
    - host_vars/vars.yml
  become: yes
  roles:
    - deploy_crawler
